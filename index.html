
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<!-- ✅ Google AdSense (optional) -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7533964735503056" crossorigin="anonymous"></script>

<title>Calculator</title>

<style>
  /* ===== Theme tokens (Dark defaults) ===== */
  :root{
    --bg:#0b0d12; --panel:#12151c; --text:#e9eef6; --muted:#8e96a3;
    --border:#1f2430; --soft:rgba(127,151,255,.12);
    --ring:#7aa2ff; --ringSoft:rgba(122,162,255,.35); --accent:#2a6cff;
    --radius:14px; --font:Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f4f6fb; --panel:#ffffff; --text:#0f172a; --muted:#64748b;
      --border:#e7eaf0; --soft:rgba(31,76,240,.08);
      --ring:#325ef6; --ringSoft:rgba(50,94,246,.35); --accent:#1f4cf0;
    }
  }

  /* Page */
  body{
    margin:0; font-family:var(--font); color:var(--text);
    background:
      radial-gradient(1000px 600px at 10% -10%, var(--soft), transparent),
      radial-gradient(800px 500px at 100% 0%, var(--soft), transparent),
      var(--bg);
    min-height:100vh;
    display:flex; align-items:center; justify-content:center;
  }
  /* Top-right link to sizer */
  .link-btn{
    position:fixed; top:12px; right:12px; z-index:10000;
    display:inline-block; padding:10px 14px; border-radius:12px;
    background:var(--accent); color:#fff; font-weight:700; text-decoration:none;
    border:1px solid var(--border);
    box-shadow:0 10px 20px color-mix(in srgb, var(--accent) 35%, transparent);
  }
  .link-btn:hover{ filter:brightness(0.95); }

  /* Calculator */
  .calculator{
    background:#212427;
    padding:24px;
    border-radius:16px;
    width:420px;
    box-shadow:0 25px 60px rgba(0,0,0,.35);
  }
  .display{
    width:100%; height:80px; border:none; background:transparent; color:#fff;
    text-align:right; font-size:48px; line-height:80px;
    padding:0 28px 0 20px; margin:0 0 14px 0;
  }
  .keys{ display:grid; grid-template-columns:repeat(4,1fr); gap:10px; }
  .key{
    background:#2b2f33; border:none; border-radius:10px; color:#e7e7e7;
    font-size:20px; height:64px; cursor:pointer;
    transition:transform .03s, background .15s;
  }
  .key:hover{ background:#34393e; }
  .key:active{ transform:translateY(1px); }
  .key.equal{ background:#1296db; color:#fff; }
  .key.equal:hover{ background:#0f86c4; }
</style>
</head>
<body>

<a class="link-btn" href="position-sizer.html" aria-label="Go to Position Sizer">Position Sizer →</a>

<!-- ===== Calculator ===== -->
<div class="calculator" id="calcMode">
  <input type="text" id="display" class="display" disabled value="0">
  <div class="keys">
    <button class="key" onclick="appendOp('%')">%</button>
    <button class="key" onclick="clearEntry()">CE</button>
    <button class="key" onclick="clearAll()">C</button>
    <button class="key" onclick="backspace()">⌫</button>

    <button class="key" onclick="reciprocal()">1/x</button>
    <button class="key" onclick="square()">x²</button>
    <button class="key" onclick="sqrt()">√x</button>
    <button class="key" onclick="appendOp('/')">÷</button>

    <button class="key" onclick="appendNum('7')">7</button>
    <button class="key" onclick="appendNum('8')">8</button>
    <button class="key" onclick="appendNum('9')">9</button>
    <button class="key" onclick="appendOp('*')">×</button>

    <button class="key" onclick="appendNum('4')">4</button>
    <button class="key" onclick="appendNum('5')">5</button>
    <button class="key" onclick="appendNum('6')">6</button>
    <button class="key" onclick="appendOp('-')">−</button>

    <button class="key" onclick="appendNum('1')">1</button>
    <button class="key" onclick="appendNum('2')">2</button>
    <button class="key" onclick="appendNum('3')">3</button>
    <button class="key" onclick="appendOp('+')">+</button>

    <button class="key" onclick="toggleSign()">±</button>
    <button class="key" onclick="appendNum('0')">0</button>
    <button class="key" onclick="appendNum('.')">.</button>
    <button class="key equal" onclick="calculate()">=</button>
  </div>
</div>

<script>
  /* ===== Calculator JS ===== */
  let display = document.getElementById("display");
  let currentValue = "0"; let resetNext = false;

  function updateDisplay(){ display.value = currentValue; }
  function appendNum(n){ if (resetNext){ currentValue=n; resetNext=false; } else { currentValue = currentValue==="0"? n : currentValue+n; } updateDisplay(); }
  function appendOp(op){ if (!isNaN(currentValue.slice(-1))) { currentValue += op; resetNext=false; updateDisplay(); } }
  function clearEntry(){ currentValue="0"; updateDisplay(); }
  function clearAll(){ currentValue="0"; updateDisplay(); }
  function backspace(){ currentValue = currentValue.length>1? currentValue.slice(0,-1) : "0"; updateDisplay(); }
  function reciprocal(){ currentValue = (1/parseFloat(currentValue||"1")).toString(); updateDisplay(); }
  function square(){ currentValue = Math.pow(parseFloat(currentValue||"0"),2).toString(); updateDisplay(); }
  function sqrt(){ currentValue = Math.sqrt(parseFloat(currentValue||"0")).toString(); updateDisplay(); }
  function toggleSign(){ currentValue = (parseFloat(currentValue||"0")*-1).toString(); updateDisplay(); }
  function calculate(){ try{ currentValue = eval(currentValue.replace(/÷/g,"/").replace(/×/g,"*")).toString(); } catch{ currentValue="Error"; } updateDisplay(); resetNext=true; }

  // Keyboard support
  document.addEventListener("keydown", e=>{
    if (!isNaN(e.key)) appendNum(e.key);
    else if (["+", "-", "*", "/", "%"].includes(e.key)) appendOp(e.key);
    else if (e.key === ".") appendNum(".");
    else if (e.key === "Enter" || e.key === "=") calculate();
    else if (e.key === "Backspace") backspace();
    else if (e.key.toLowerCase() === "c" && !e.ctrlKey) clearAll();
    else if (e.key === "Escape") clearAll();
  });
</script>
</body>
</html>
